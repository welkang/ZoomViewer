<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>查看附件</title>
    <link rel="icon" href="http://dui.dooioo.com/public/images/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="http://dui.dooioo.com/public/css/main.css"/>
    <link rel="stylesheet" href="gallery.css"/>
    <script type="text/javascript" src="http://dui.dooioo.com/public/js/jquery-1.4.2.min.js"></script>
    <script type="text/javascript" src="zoom-viewer.js"></script>
</head>

<body>
<div class="zv_alert"></div>
<div class="zv_wrapper js_zvWrapper">
    <header class="zv_header">
        <div class="zv_header_wrapper clearfix">
            <h1>附件预览</h1>
        </div>
    </header>
    <div class="zv_control">
        <div class="zv_zoom_in zv_btn js_zoomIn" title="也可使用滚轮缩放哦～"></div>
        <div class="zv_zoom_out zv_btn js_zoomOut" title="也可使用滚轮缩放哦～"></div>
        <div class="zv_zoom_zero zv_btn js_zoomZero"></div>
        <div class="zv_zoom_fit zv_btn js_zoomFit"></div>
        <div class="zv_rotate_left zv_btn js_rotateLeft"></div>
        <div class="zv_rotate_right zv_btn js_rotateRight"></div>
        <div class="zv_prev zv_btn js_prev"></div>
        <div class="zv_next zv_btn js_next"></div>
    </div>
    <div class="thumbnail webkitscrollbar">
        <a href="javascript:;" index="0">
            <div>
                <img src="http://fs.dooioo.com/fetch/vp/jpgy/ptgi/110x110/20140617/b924e255-32ab-411c-b3f4-55c4448ded1e.jpg"
                     title="">
            </div>
        </a>
        <a href="javascript:;" index="1">
            <div>
                <img src="http://fs.dooioo.com/fetch/vp/jpgy/ptgi/110x110/20140617/89015e4b-e289-4de7-877e-e3d769e4a6c2.jpg"
                     title="">
            </div>
        </a>
        <a href="javascript:;" index="2">
            <div>
                <img src="http://fs.dooioo.com/fetch/vp/jpgy/ptgi/110x110/20140617/8c970993-f49e-41e7-b2f8-0596f399db0f.jpg"
                     title="">
            </div>
        </a>
        <a href="javascript:;" index="3">
            <div>
                <img src="http://fs.dooioo.com/fetch/vp/jpgy/ptgi/110x110/20140617/4f3f50de-325d-4d58-86fe-54133c4ca4b3.jpg"
                     title="">
            </div>
        </a>
        <a href="javascript:;" index="4">
            <div>
                <img src="http://fs.dooioo.com/fetch/vp/jpgy/ptgi/110x110/20140617/c6666fed-9d61-4b55-9a15-df42cdccd58b.jpg"
                     title="">
            </div>
        </a>
        <a href="javascript:;" index="5">
            <div>
                <img src="http://fs.dooioo.com/fetch/vp/jpgy/ptgi/110x110/20140617/2e503b01-57e6-4044-9811-b81b9a65859c.jpg"
                     title="">
            </div>
        </a>
        <a href="javascript:;" index="6">
            <div>
                <img src="http://fs.dooioo.com/fetch/vp/jpgy/ptgi/110x110/20140617/1e2d7c7a-0499-4066-9d30-2cc5632833ac.jpg"
                     title="">
            </div>
        </a>
    </div>
    <div class="zv_viewer">
        <div class="zv_img loading-bg">
            <img class="zv_item"
                 src="http://fs.dooioo.com/fetch/vp/jpgy/sfile/20140617/b924e255-32ab-411c-b3f4-55c4448ded1e.jpg"
                 title="">
        </div>
        <div class="zv_img loading-bg">
            <img class="zv_item"
                 src="http://fs.dooioo.com/fetch/vp/jpgy/sfile/20140617/89015e4b-e289-4de7-877e-e3d769e4a6c2.jpg"
                 title="">
        </div>
        <div class="zv_img loading-bg">
            <img class="zv_item"
                 src="http://fs.dooioo.com/fetch/vp/jpgy/sfile/20140617/8c970993-f49e-41e7-b2f8-0596f399db0f.jpg"
                 title="">
        </div>
        <div class="zv_img loading-bg">
            <img class="zv_item"
                 src="http://fs.dooioo.com/fetch/vp/jpgy/sfile/20140617/4f3f50de-325d-4d58-86fe-54133c4ca4b3.jpg"
                 title="">
        </div>
        <div class="zv_img loading-bg">
            <img class="zv_item"
                 src="http://fs.dooioo.com/fetch/vp/jpgy/sfile/20140617/c6666fed-9d61-4b55-9a15-df42cdccd58b.jpg"
                 title="">
        </div>
        <div class="zv_img loading-bg">
            <img class="zv_item"
                 src="http://fs.dooioo.com/fetch/vp/jpgy/sfile/20140617/2e503b01-57e6-4044-9811-b81b9a65859c.jpg"
                 title="">
        </div>
        <div class="zv_img loading-bg">
            <img class="zv_item"
                 src="http://fs.dooioo.com/fetch/vp/jpgy/sfile/20140617/1e2d7c7a-0499-4066-9d30-2cc5632833ac.jpg"
                 title="">
        </div>
    </div>
</div>

<script type="text/javascript">
    $(function () {
        $('.zv_viewer img').zoomViewer();

        $alert = $('.zv_alert');

        $wrapper = $('.js_zvWrapper');
        // Button Click Control
        $wrapper.find('.js_zoomIn').click(function () {
            $('.zv_viewer img:visible').trigger('zoom-in');
        });
        $wrapper.find('.js_zoomOut').click(function () {
            $('.zv_viewer img:visible').trigger('zoom-out');
        });
        $wrapper.find('.js_zoomZero').click(function () {
            $('.zv_viewer img:visible').trigger('zoom-original');
        });
        $wrapper.find('.js_zoomFit').click(function () {
            $('.zv_viewer img:visible').trigger('zoom-fit');
        });
        $wrapper.find('.js_rotateLeft').click(function () {
            console.log('times');
            $('.zv_viewer img:visible').trigger('rotate-left');
        });
        $wrapper.find('.js_rotateRight').click(function () {
            $('.zv_viewer img:visible').trigger('rotate-left');
        });


        $('.thumbnail a').bind('click', function () {
            $('.thumbnail a').removeClass('active');
            $(this).addClass('active');
            currentIndex = $(this).attr('index');
            var previewWrap = $('.zv_viewer div');
            previewWrap.hide();
            previewWrap.eq(currentIndex).show();
        });
        $('.thumbnail a').eq(0).click();
        // 缩略图高度自适应
//        $('.thumbnail').height($(window).height() -74);

        $wrapper.find('.js_next').click(function () {
            var $currentImg = $('.thumbnail a.active');
            if ($currentImg.attr('index') == $('.thumbnail a').length - 1) {
                $alert.html('已到最后一张').stop(true, true).slideDown('fast').delay(1000).slideUp('normal');
                return
            }
            $currentImg.next('a').click();
        });
        $wrapper.find('.js_prev').click(function () {
            var $currentImg = $('.thumbnail a.active');
            if ($currentImg.attr('index') == 0) {
                $alert.html('已到第一张').stop(true, true).slideDown('fast').delay(1000).slideUp('normal');
                return
            }
            $currentImg.prev('a').click();
        });

        // 左、右按键切换图片
        $(document).keyup(function (e) {
            switch (e.keyCode) {
                case 37 :
                    $wrapper.find('.js_prev').click();
                    break;
                case 39 :
                    $wrapper.find('.js_next').click();
                    break;
            }
        });


        // Mousewheel Event
        $('.zv_viewer').bind('mousewheel', function (event) {
            event.preventDefault();
            if (event.wheelDelta > 0) {
                $('.zv_viewer img:visible').trigger('zoom-out');
            } else {
                $('.zv_viewer img:visible').trigger('zoom-in');
            }
        });
    })
</script>
</body>
</html>
